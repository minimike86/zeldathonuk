<app-navbar [showJgDonationComponent]="false"></app-navbar>
<div class="container py-2" style="background: lightgrey;">

  <div class="">
    <h1 class="text-dark pt-2">OBS Layouts</h1>
    <div class="w-100">
      <div class="card border-secondary layout-list">
        <div class="card-header">Standard (4:3)</div>
        <img class="card-img" src="../../../assets/img/obs-bg/standard-layout-preview.PNG">
        <div class="card-footer"><a class="btn btn-block btn-primary" target="_blank" routerLink="/obs/standard">Open</a></div>
      </div>
      <div class="card border-secondary layout-list">
        <div class="card-header">Widescreen (16:9)</div>
        <img class="card-img" src="../../../assets/img/obs-bg/widescreen-layout-preview.PNG">
        <div class="card-footer"><a class="btn btn-block btn-primary" target="_blank" routerLink="/obs/widescreen">Open</a></div>
      </div>
      <div class="card border-secondary layout-list">
        <div class="card-header">3DS</div>
        <img class="card-img" src="../../../assets/img/obs-bg/ds3-layout-preview.PNG">
        <div class="card-footer"><a class="btn btn-block btn-primary" target="_blank" routerLink="/obs/3ds">Open</a></div>
      </div>
      <div class="card border-secondary layout-list">
        <div class="card-header">DS (Vertical)</div>
        <img class="card-img" src="../../../assets/img/obs-bg/dsv-layout-preview.PNG">
        <div class="card-footer"><a class="btn btn-block btn-primary" target="_blank" routerLink="/obs/dsv">Open</a></div>
      </div>
      <div class="card border-secondary layout-list">
        <div class="card-header">DS</div>
        <img class="card-img" src="../../../assets/img/obs-bg/ds-layout-preview.PNG">
        <div class="card-footer"><a class="btn btn-block btn-primary" target="_blank" routerLink="/obs/ds">Open</a></div>
      </div>
    </div>
  </div>

  <hr class="hr">

  <div class="mb-3">
    <div class="d-flex">
      <h1 class="text-dark pt-2 mr-3">Timer</h1>
      <div class="m-3">
        <button class="btn btn-success mx-1" (click)="start()">{{ countUpTimer === undefined ? 'Loading...' : countUpTimer[0].isStarted === false && countUpTimer[0].hasPaused === false ? 'start' : 'resume' }}</button>
        <button class="btn btn-warning mx-1" (click)="reset()">reset</button>
        <button class="btn btn-danger mx-1" (click)="stop()">stop</button>
      </div>
    </div>
  </div>

  <hr class="hr">

  <div class="mb-5">
    <div class="d-flex">
      <h1 class="text-dark pt-2 mr-3">Select Game</h1>
      <div class="align-self-end card border-secondary bg-warning mb-2 p-1 h-25">
        <div class="d-flex">
          <span class="small mr-2">Currently Playing:</span>
          <h6 class="m-0">{{ currentlyPlaying !== undefined ? currentlyPlaying[0].gameName : 'fetching...' }}</h6>
        </div>
      </div>
    </div>
    <div class="d-flex">
      <ng-template ngFor let-gameItem [ngForOf]="gameList">
        <div class="card border-secondary layout-list">
          <div class="card-header" style="height: 97px;">{{ gameItem.gameName }}</div>
          <img class="card-img" style="height: 230px;" [src]="gameItem.coverArt">
          <div class="card-footer">
            <button class="btn btn-block"
                    [disabled]="currentlyPlaying !== undefined && currentlyPlaying[0].gameName === gameItem.gameName"
                    [ngClass]="currentlyPlaying !== undefined && currentlyPlaying[0].gameName === gameItem.gameName ? 'btn-success' : 'btn-danger'"
                    (click)="onSwapGameClick(gameItem)">
              {{ currentlyPlaying !== undefined && currentlyPlaying[0].gameName === gameItem.gameName ? 'Playing' : 'Swap' }}
            </button>
          </div>
        </div>
      </ng-template>
    </div>
  </div>

</div>
<app-footer></app-footer>

<ng-template #yesNoModalDialog>
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title">Are you sure?</h5>
      <button type="button" class="close" aria-label="Close" (click)="yesNoModal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <p>This will swap the currently played title on the OBS layouts and could look really shit if you swap halfway through that game...</p>
      <p>Are you sure you want to swap to the selected game?:</p>
      <div class="card border-secondary" style="max-height: 20vh; overflow: hidden;">
        <div class="d-flex">
          <img class="card-img" style="width: 33%;" [src]="swapToGame.coverArt">
          <div class="card-header" style="width: 66%;">{{ swapToGame.gameName }}</div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="yesNoModal.close('Cancel click')">Cancel</button>
      <button type="button" class="btn btn-primary" (click)="swapModalBtn(swapToGame)">Swap Game</button>
    </div>
  </div>
</ng-template>
